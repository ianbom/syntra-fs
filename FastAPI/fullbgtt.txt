Design and Implementation of Hypothermia Symptoms Early Detection With Smart Jacket Based on Wireless Body Area Network M. UDIN HARUN AL RASYID , (Member, IEEE), SRITRUSTA SUKARIDHOTO, (Member, IEEE), AMANG SUDARSONO, AND AFDOLASH NUR KAFFAH

Authors: Politeknik Elektronika, Negeri Surabaya, M Udin, Harun Al Rasyid, GW K Moore, JL Semple, F González, O Villegas, D Ramírez, V Sánchez, H Domínguez, V Cojocaru, D Vrabii, AS Abiodun, MH Anisi, MK Khan, A Ali, Y Ming, S Chakraborty, S Iram, C Savaglio, P Pace, G Aloi, A Liotta, G Fortino, MT I Ul Huque, KS Munasinghe, A Jamalipour, Y Qu, G Zheng, H Ma, X Wang, B Ji, H Wu, T Le, S Moh, MU H A Rasyid, FA Saputra, A Christian, MU H Al Rasyid, AA Pranata, B.-H Lee, FA Saputra, A Sudarsono, Y Xu, Z Huang, S Yang, Z Wang, B Yang, Y Li, V Varghese, MJ Nene, LD Nardis, D Domenicali, M.-GD Benedetto, HA Sabti, DV Thiel, MA Rusli, S Takayama, A Kos, A Umek, T Wu, F Wu, J.-M Redoute, MR Yuce, S Ahmed, M Saqib, M Adil, T Ali, A Ishtiaq, E Jovanov, JN S Rubi, PR L Gondim, M Ghamari, B Janko, RS Sherratt, W Harwin, R Piechockic, C Soltanpur, G Wolgast, C Ehrenborg, A Israelsson, J Helander, E Johansson, H Manefjord, J Kang, H Larkin, B Venema, S Leonhardt, AS Mahmood, E Jafer, S Hussain, X Fernando, E Baba, A Jilbab, A Hammouch, S.-S Lin, C.-W Lan, H.-Y Hsu, S.-T Chen, J.-L Bayo-Monton, A Bayo-Monton, W Han, C Fernandez-Llatas, Y Sun, V Traver, SS Fakhrulddin, SK Gharghan, A Al-Naji, J Chahl, YJ Jeon, SJ Kang, EE Egbogah, AO Fapojuwo, X Yang, L Wang, Z Zhang, A Alhayajneh, AN Baccarini, GM Weiss, T Hayajneh, A Farajidavar, X Tian, M Zhang, JS Ho, M Udin, Al Rasyid (member, Ieee

Abstract: Hypothermia is a state where the body cannot balance the body heat due to excessive cold temperature pressure so that there will be loss of heat in the body. The result will be a quickly decreasing body temperature. A condition where a body temperature is less than 35 • C and that it is accompanied by a decrease in consciousness may cause a death threat. Hypothermia is more common when climbers perform activities in cold temperatures and strong winds, and when they wear wet clothes. It is not easy for a mountain climber to find out his own body temperature as well as that of his friends and to determine whether the body temperature is safe or affected by hypothermia symptoms. Therefore, this research formed a device to detect hypothermia. It consists of temperature sensor, pulse sensor, and accompanied by heating elements based on wireless body area network (WBAN). This device will connect to the user's smartphone by using Bluetooth, so the user can see the condition of his body, adjust the temperature of the heating element, and make a group of climbers. The experiment result shows that the device can detect hypothermia symptoms and inform these symptoms to the users and groups of mountaineers in WBAN area, and the climbers can be more vigilant in responding to hypothermia so that mortality cases caused by hypothermia can be minimized. INDEX TERMS ehealth, heart rate, hypothermia, temperature, wireless body area network.

I. INTRODUCTION

Hypothermia is a condition in which the body's mechanism for temperature regulation has difficulty coping with cold pressure. Hypothermia can also be defined as an internal temperature below 35 • C. The human body can regulate temperature in the thermo neutral zone, which is between 36.5-37.5 • C. Beyond that temperature, the body's response to regulating temperature will actively balance heat production and heat loss in the body. Hypothermia often occurs when climbers are in extreme environments, especially cold temperatures, and due to the health factor of climbers [1].

Extreme situations in climbing environments such as cold air pressure due to high mountains, strong winds blowing, wet clothes, and other extreme factors make hypothermia become a common disease in the climbing areas [2], [3].

The associate editor coordinating the review of this manuscript and approving it for publication was Thanh Ngoc Dinh . Knowledge of safety in climbing is a major factor to minimize the incidence of hypothermia. The problem is most climbers do not know the basics of salvation in climbing. There are still many climbers who do climbing because of hobbies or just having fun without being equipped with health and safety knowledge when climbing. This often results in mishandling of hypothermia victims. Inadequate treatment in victims of hypothermia can cause hypothermia more severe and result in loss of consciousness or fainting. It can even lead to death.

Therefore, to further suppress the incidence of hypothermia among climbers when in the mountains, we are motivated to utilize current technology with the health sector, especially safety in climbing. We develop a wearable device that can be used in climbing so that it does not disrupt the climbers during the move.

Based on the problem mentioned above, in this paper we propose a health monitoring device embedded into climbing jackets by utilizing Wireless Body Area Network (WBAN) technology. The device can be used by climbers during the climb without reducing the comfort and mobility of the climbers. The device used Arduino Nano as a sensor data processing center while the sensors used are temperature sensors and pulse sensors. The body temperature sensor used in the device is the MLX90615 which utilizes infrared technology so that for temperature measurements it can be done without having to make direct contact with the sensor. As for the heart sensor used is the sensor pulse XD-58C that will be placed on the fingertip of the climber to measure the number of heart beats per minute. This device is also accompanied by a heating element used TEC-12706 peltier. The peltier will connect to the motor driver that serves to regulate the temperature. The device is accompanied by Bluetooth which serves to transmit sensor data to the climber's Android smartphone. The Bluetooth used in this research is Bluetooth v4.0 which has been supported with low energy technology.

Through their Android smartphone, climbers can see the temperature and heartbeat conditions presented in the form of numbers along with their body status. In this Android app, climbers will be given information on how to handle based on current health conditions. In addition, climbers can create climber groups that will connect with other climbers in a group. Group creation uses Wi-Fi Direct technology that allows Android to connect to other Android over Wi-Fi networks. For Wi-Fi Direct usage, one member of a group of climbers must be willing to be the group leader who will become the bridge connecting all members. When climbers are connected to the climbing group, they can see the one another's position and body condition. When the condition of a climber's body worsens, other members will get a notification. The data of worsening body condition will be stored on SQLite Android as history.

The main contributions of this study are:

• Design and implementation of a wearable jacket prototype system for hypothermia detection and perform initial treatment with sensors and a heating element.

• Design and execution of a case study that proves the suitability and usability of wearable jacket sensors in climbing activity.

• The concept of real-time hypothermia feedback from system and information sharing of the body conditions to a group of climbers in the same network using Wi-Fi Direct technology without having to connect to an internet connection. This article is structured as follows. Section 2 describes previous related studies. Section 3 describes the system, the hardware, and the software architectures. Section 4 describes the methodology which contains experimental setup and algorithm to determine the health condition of the climber in detail. Section 5 describes the evaluation of experimental results. Finally, concluding remarks and plans for our future work are provided in Section 6.

II. RELATED WORK

WBAN sensor nodes collect biological signal data from patients over a long period of time. The data is wirelessly sent to the server, stored on the server for further processing, and used as a reference to determine an important decision [4], [5]. Sensor nodes require special communication methods to save energy to extend the network lifetime [6]. Several classifications of routing protocols for WBAN were used to send data from sensor to server such as posturebased routing, temperature-based routing, cross layer routing, cluster-based routing, and QoS-based routing to gain energy efficient routing protocols for WBAN healthcare system [7], [8]. The interference mitigation methods in WBAN such as power control approach, MAC approach, cognitive radio approach, ultra wideband (UWB) approach, and signal processing approach is important to increase data sending reliability [9]. WBAN technology can be used in various fields of application such as health [10], [11], transportation [12], military [13], and sport [14]- [17].

Many researchers have conducted research related to the use of WBAN and internet of things (IoT) [18]- [21] in various fields, especially in the health sector. Ghamari et al. [22] provided a WBAN system for elderly and patients remote monitoring in residential environments. Wolgast et al. [23] designed WBAN to detect heart attack using ECG sensor and send the data to smartphone through wireless Bluetooth. Kang et al. [24] proposed a smart device to monitor vital signs such as heart rate, body temperature, and respiration rate. Venema et al. [25] proposed a monitoring system during high altitude activities using in-ear pulse oximeter and Photoplethysmography (PPG) to monitor blood oxygen (SP02) and heart rate. Mahmood et al. [26] proposed WBAN to monitor heart rate and fall detection using electrocardiography (ECG), temperature, and accelerometer sensors. Baba et al. [27] proposed WBAN application for health remote monitoring to measure breathing, heart rate, ECG, and SPO2. Lin et al. [28] proposed wearable heat stroke detection to evaluate and predict the occurrence of a heat stroke for a runner. Monton et al. [29] proposed e-health prototype merging from five health sensors, i.e., ECG, EMG, Temperature, Airflow, and GSR. Fakhrulddin et al. [30] proposed an advanced first aid system (AFAS) to monitor elderly persons from risk of falling using accelerometer sensor and heartbeat sensor. Jeon et al. [31] developed wearable device called sleep care kit to measure real-time multiple bio-signals such as SPO2, body temperature, and respiration to determine sleep quality and calculate the risk of sleep apnea. Moreover, some researchers also pay attention to WBAN technology in terms of energy consumption [32], [33], security authentication [34], and signal transmission [35].

In this article, there are several innovations or uniqueness compared to the related researches mentioned above. This research focuses more on making jackets to be worn by mountain climbers. Some electric jackets are only designed to simply warm the body with certain intensity, but in this study, we make an electric jacket that is able to detect hypothermia based on body data such as heart and temperature, and a climber can see the condition of his body in a visual displayed on his smartphone of the climber. The jacket is designed to perform early detection of hypothermia symptoms so that the jacket will automatically be able to warm the body of the climber and send notification messages through the climber smartphone. Furthermore, the body data can be sent to a group of friends with the assumption that there is no internet connection at the case study site in the high mountain. Table 1 shows the comparisons of the proposed system with related works in terms of application domain, sensor modules, wireless communication, monitoring device, and the benefits of the system.

III. SYSTEM ARCHITECTURE

We built an initial detection and treatment system for climbers by utilizing WBAN technology to monitor the condition of the climber's body as shown in Fig. 1. The system was designed to monitor climbers' body temperature and heart rate, and to do the initial handling such as warming the temperature of the jacket using a heat element. Several sensors and other components were used, namely the pulse sensor that was used to get climbers' heart rate data, the MLX90615 temperature sensor that was used to get the climber's body temperature, the DS18B20 temperature sensor that was used to get the temperature of the heater, and the peltier that was used for the jacket heater. The sensors and components were installed on an Arduino microcontroller device and the circuit was embedded in a jacket. The values of the climber's heart rate and body temperature were combined to get a correlation as a determination of the climber's condition. Delivery of values was done in 2 ways, namely idle mode and active mode. This was done for efficient use of resources. The data were sent directly to the end device and execute the action point. Action point is a device of hardware consisting of motor drivers and peltiers. This action point was used to regulate the high and low temperatures of the heating element. This circuit was directly connected to Arduino. Users could adjust the temperature of the heater by sending data to Arduino and the data would be forwarded to the action point.

The climbers could use an Android smartphone to access data sent by a microcontroller. Android application makes it easy for climbers to find out their body condition in terms of temperature and heart rate. The climber could regulate the temperature of the heating element on the jacket using the Android application. The climber could form a group of climbers and share the information of body conditions on the Android application. The climber and group members could connect each other using Wi-Fi Direct technology so that climbers could use this feature without having to connect to an internet connection.

In this research there are 2 architectural designs, namely hardware and software. The architectural design of the hardware will be applied to the climbing jacket, while the software architecture design will be applied to Android smartphones.  This study used data from temperature sensors and heart rate sensors as indicators for determining the condition of the climber's body. Data from the two sensors were processed to obtain an output value to get the climber health code. Data transmission was done wirelessly via a Bluetooth communication network.

A. HARDWARE ARCHITECTURE

In regard to data transmission based on the available time, there are 2 modes of sending data on this device. Idle mode is a mode that is used to increase the efficiency of the data source used. This mode will be active when the climber closes

TABLE 1. Comparisons of the proposed system with related works.

the application. This mode will send data to Android with a time delay that is every 1 minute. Thus, the process of sending data will occur once every 1 minute and it can minimize the power for the sending process. Although data is sent once every 1 minute to Android, data from the sensor will still be retrieved at any time. This is to avoid delays in information about physical health while in active mode the data will be sent every 5 seconds. This mode will be active when the climber is using or opening the application. This mode allows climbers to see the condition of the body in more real-time.

The communication of action point with Arduino still used cable. Arduino would get data from both sensors; data from both sensors would be calculated and would have an output code. If the output code shows that the climber was in a less prime condition, Arduino would send a command to the action point to activate the heater. The action point would issue a voltage in accordance with the Arduino command, and then the voltage would be converted into heat using a peltier.

Through the Android application interface, climbers could access data directly from Arduino using a Bluetooth connection. Sensor data obtained would be displayed in the form of numbers with clear units along with a message or description of the climber's body condition. There was also some handling information related to early prevention of hypothermia patients. Users could measure temperature and heart rate more intensely in the Android application. In addition, users could form a group of climbers who could connect with existing climbers. With this feature, climbers could share the condition of their bodies with other climbers. In the case of hypothermia, body data would be stored in Android data storage and a notification would be displayed for climbers when the Android application were opened.

The proposed hardware device consists of:

1) ARDUINO NANO Arduino is an open source single-board micro controller designed to facilitate the use of electronics in various fields. Arduino Nano uses ATmega 328 microcontroller with AVR architecture. It requires 5V for power operation with 19mA power consumption. It has 32KB flash memory and 2GB SRAM with a clock speed of 16MHz. Arduino has 22 digital I/O pins, 6 of which are PWM pins. Each pin I/O has a current of 40mA. Arduino Nano size is 18 × 45mm with 7g weight.

2) PULSE SENSOR

Pulse sensor was used to retrieve the heart rate data of climber's body. Heart rate data was used to determine whether the climber was experiencing tachycardia or bradycardia or normal condition. Pulse sensor has a diameter of about 16mm with a thickness of 3mm, working on voltage 3V to 5V with power consumption of about 4mA.

3) TEMPERATURE SENSOR -MLX90615

Temperature sensor MLX90615 was used to obtain climbers' body temperature data. The data would determine whether the climber suffers from hypothermia. The temperature sensor MLX90615 can receive a voltage of 5V with an operating voltage of 3.6V. This sensor can measure 2 types of temperature i.e. object temperature and ambient temperature.

The measured temperature range of the MLX90615 sensor is -20 • C to 125 • C.

4) TEMPERATURE SENSOR -DS18B20

Temperature sensor DS18B20 was used to determine the temperature of peltier. It allowed the climber to see the peltier temperature on the jacket. The DS18B20 sensor is a digital temperature sensor that uses the one-wire communication method. This sensor uses a voltage of 3V to 5V, and it can measure the temperature from -55 • C to 125 • C with an accuracy of about 0.5 • C.

5) PELTIER

Peltier was used to increase the temperature in the jacket.

Peltier is a Thermo-Electric component. When this component has a voltage, it will move heat from one side to the other, so it can produce 40 • C to 70 • C heat. Peltier has dimensions of 40 × 40 × 4mm with 29g weight.

6) MOTOR DRIVER -L298N

The motor driver was used to adjust the voltage to be supplied to the peltier so that the temperature on the peltier can be adjusted according to the climber's preference. This research used motor driver L298N with power supply 5V to 46V. It has a maximum power of 25W and a working temperature of about 25

• C to 130 • C. The dimensions of the L298N are 60 × 54mm with a weight of 48g. 7) BLUETOOTH v4.0 BLE Bluetooth was used to transmit climber health data obtained from previous sensors to the climbers' Android. This research used Bluetooth v4.0 with HM-10 type which comes with Low Energy technology. This Bluetooth works on a 24 GHz ISM Band frequency with GFSK modulation method. It has asynchronous and synchronous speed of 6K bytes and uses authentication and encryption security methods. This Bluetooth works on voltage + 3.3V 50mA.

8) BATTERY

The jacket used Li-Po (Lithium Ion Polymer) type battery which has bigger capacity and is not easily depleted, making it suitable for climbing which takes at least 2 hours to reach the inter-point travel post.

B. SOFTWARE ARCHITECTURE

It includes an Android, Bluetooth Gatt. Wi-Fi Direct, and SQLite.

1) ANDROID

Android is a Linux-based operating system designed for touch-screen devices such as smartphones and tablets. In general, Android application programming uses Android Studio with Java programming language and Kotlin. In this research, the Android application was connected with hardware devices via Bluetooth which serves to display the results of data collection of temperature sensors and pulse sensors. In addition, the Android app could adjust the heat level of peltier, save history of accidents caused by hypothermia, and enable group creation to share health data.

2) BLUETOOTH GATT

Bluetooth Gatt is an architecture built on the Attribute Protocol (ATT). Bluetooth Gatt was used to determine the way two low energy Bluetooth devices send and receive data, starting from searching Bluetooth connection until the process of exchanging data from Android applications with hardware devices. Unlike the use of non-low-energy Bluetooth, to connect Android hardware devices that use low-energy Bluetooth, the architecture of Bluetooth Gatt had to be used.

3) Wi-Fi DIRECT Wi-Fi Direct or Wi-Fi P2P (Peer to Peer) is a standard Wi-Fi that allows direct connection without access point. Thus, Wi-Fi Direct allows multiple devices to connect one another. Wi-Fi Direct has a concept like ad-hoc. The difference is Wi-Fi Direct using single radio hop communication whereas ad-hoc mode Wi-Fi uses communication of multiple radio hops. By using Wi-Fi Direct technology, communication between devices will be like using Bluetooth. The device can communicate with the typical speed of Wi-Fi. Wi-Fi Direct can connect devices even if the device comes from different manufacturers. To use Wi-Fi Direct technology, there must be at least one supported Wi-Fi device with Wi-Fi Direct, this is to enable peer-to-peer connections between devices.

In this research, Wi-Fi Direct was used to connect user climber app with the climbing group. Therefore, it was required that in one climber group be one group leader who would make Wi-Fi Direct network. Other member's data would be sent thoroughly to all members group using this Wi-Fi Direct technology.

4) SQLite

SQLite is a relational database system that is ACID-compliant and has a relatively small code library size. SQLite is not a system that only communicates with the program, but also as part of an overall program. The API calling, or its use, is done directly by programming language. In the Android app, SQLite is considered as a local database, so the data storage is processed using Android programming language i.e. Java or Kotlin. Because of its direct use of the programming language, SQLite can reduce overhead, latency, and more. Some of the advantages of SQLite are easy to manage, very stable, expandable, very fast. Additionally, it uses the WAL (Write-Ahead Logging) mode that allows SQLite to read and write simultaneously.

IV. METHODOLOGY

Symptoms of hypothermia disease should be known by the climber so that handling is given more quickly and effectively. This research made a hardware and software device that aims to facilitate the detection and handling of hypothermia disease. The hardware devices would be put on a climbing jacket. The hardware device consisted of several sensors, microcontroller, Bluetooth, and heating elements. The sensors used were temperature sensors and pulse sensors. The temperature sensor were connected to Arduino by using SCL pin and SDA pin while the pulse sensor connected with Arduino using pin A0. Temperature sensors would be placed in the area near the armpits because in that area the body temperature measurement can be done more effectively. Temperature sensor would take the temperature of the object i.e. body temperature and sends it to the microcontroller. The pulse sensor would be placed on the fingertip of the climber because the pulse sensor was designed to more effectively read the signal on the palm area. The pulse sensor data would also be sent to the Arduino which would then be used as parameters to determine whether the climber is hypothermic or not. In Arduino there are 4 categories of health, namely ''healthy'', ''rest'', ''hypothermia'', and ''emergency''. The ''healthy'' category means the climber was in excellent shape to continue the activity. Category ''rest'' means the climber is in a less than excellent, it is advisable to rest first to avoid hypothermia. Category ''hypothermia'' means climbers are in a state of being hypothermia, immediately do the appropriate treatment. Finally, the category of ''emergency'' means climbers in a state of serious hypothermia, call on reinforcements and get to the nearest hospital. In addition, the automatic heater in the jacket would begin to heat up to warm the climber when climbers were in abnormal circumstances. There was also a temperature sensor that had a function to measure the temperature of the heater; this sensor was connected to the Arduino using pin D5. Sensor data would also be sent to the climber smartphone by using Bluetooth. The Bluetooth was connected to the Arduino using RX pin and TX pin.

Regarding the software, the system used Android operating system for smartphone application development. Android would receive sensor data from the device via Bluetooth in real time. The sensor data would then be displayed in the form of numbers and graphics on the user interface. There were also features to join or create a group of climbers using Wi-Fi Direct technology. With these features climbers could connect to other climbers in one group. Climbers could see each other's health and position. The last feature was health data storage. The stored health data is the health data of the climber when attacked by hypothermia.

Fig. 3 shows the experimental setup in which the overall components are connected to the Arduino board. Sensors, motor drivers, and Bluetooth were connected to Arduino pins while peltier and battery are connected to motor driver.

This research designed a simple algorithm to determine the health condition of the climber as shown in Fig. 4. This algorithm serves to combine data from the sensor into an output value (condition code). It aims to facilitate the determination of conditions and information that will be given to climbers.

In one end device, there are two sensors (temperature and pulse sensors) to determine the state of the climbing body and one sensor (temperature sensor) to determine the condition  of the jacket. Combined sensor data only sensor data that serves to determine the condition of the climber's body. Sensor data will be processed using the condition determination algorithm. This data will be a parameter to enable the heating element on the jacket.

The temperature sensor of type MLX90615 was used to observe body temperature of climbers while the temperature sensor type DS18B20 was used to observe the state of the peltier temperature to adjust the jacket temperature. The body temperature sensor data would be divided into 4 categories, namely normal, mild hypothermia, moderate hypothermia, and severe hypothermia. Each category would be given a code to determine the next condition. The greater the code, the more severe the condition is. This is as shown in table 2. Heartbeat or pulse sensors of type XD-58C were used to observe heart rate or climber's pulse. Data from sensor pulses would be divided into 3 categories, namely normal, tachycardia, and bradycardia. Just like the previous sensor under any conditions, codes would be given for determination of the next condition. The greater the code the more severe the condition is. This is as shown in table 3.

TABLE 3. Heartbeat sensor code.

Where, Normal = 100 bpm -60 bpm, Tachycardia, the beat is more than the normal limit => 100 bpm, Bradycardia, and the beat is less than the normal limit = < 60 bpm.

This code processes the input value of each variable (sensor value) as a parameter to issue a climber's health condition code. After all the sensor conditions get a code, the sensor code will be mutated with another sensor code. Subsequently, it generates some code in 2-digit numbers. This code will later be included in the algorithm in determining the health condition of the climber. The result of code in 2-digit numbers of the two sensors is shown in table 4. The permutation result shows the pattern of code for the determination of condition. Furthermore, the parameters are selected for the grouping of health conditions, namely healthy, rest, hypothermia, and emergency. This is the condition that will be used to determine the activation of the action point and the determination of message handling that will appear in the Android app. The number of possibilities formed from the permutation of the sensor code is 12 possibilities as shown in table 5.

TABLE 5. Possible condition.

To increase the effectiveness data packets transmission on end devices, this study used an algorithm with 2 modes of delivery as shown in Fig. 5. Idle mode allows the end device to send data when the Android climber application is in a closed state. The data will be sent once a minute to minimize power output. Whereas the active mode allows the end device to send data when the climber is actively using an Android application, or the application is open. Data in this mode will be sent every 5 seconds so that climbers can find out the condition of the body in real time. Although sending data from Arduino to Android has a delay, data retrieval from the sensor to Arduino is done at any time. The form of data sent is JSON String. This is to facilitate parsing on Android programming. The data transmitted are body temperature sensor data, heart rate data, peltier temperature sensor data, and condition codes. This JSON data will be sent during active mode.

Fig. 6 shows the workflow of the end device in the data retrieval and transmission. At the beginning of the microcontroller work, the first thing to be processed is the initialization of the existing header file and the specified variable, other variables, the setup function, and the loop function. In the setup function, the end device will read data from the installed sensor i.e. temperature sensor and heart sensor. If the sensor is successfully activated, it will read condition code; otherwise the program will return to the start of activate sensor step. The sensor data will be sent via Bluetooth. Access to the action point is also done on the function to set the temperature of peltier. Fig. 7 shows the workflow of action point. The action point is a series of components consisting of driver motor L298N and peltier. This circuit will be used to increase the temperature of the jacket so that the climber's body temperature is not lost due to the cold environmental temperature.

The action point communicates directly with the Arduino by connecting the input pin cable to the Arduino. By default, the condition of the action points is 0 or off. Users can set the output of the action point by changing the PWM pin value on the Arduino. In addition, the action point can change its value automatically when the health condition of the climber is hypothermia or emergency.

The database used in this study was SQLite database system as shown in code 1 (database sensor schema). SQLite provides quick and easy access, and it was programmed using Android programming language i.e. Java or Kotlin. The _id field is unique and different on each saved data. Field amb, obj, and heart are fields used to store sensor data while the field code will load the health code of the climber. There is also a latitude and longitude field to store the climber's position. In addition, there is timestamp column containing the time and date data, and they are stored in the database. The SQLite database was used on the Android, so the data to be stored must be sent first from Arduino to Android. On the Android, sensor data from Arduino will be sorted first to determine which data will be stored in the database. The data to be stored in the SQLite database provide the information about whether the climber is experiencing hypothermia. The data that show good health will not be stored in the database but will still be displayed on the climber's Android.

V. EXPERIMENTAL RESULTS

The hardware device that has been set up will be placed on a black box to make it look neater, to minimize the lost data, and to avoid short-circuit between the components. Some components to be stored in the black box are Arduino, Driver Motor, Bluetooth, and all the other connectors like connector, battery, and peltier sensor as shown in Fig. 8. Sensors, batteries, and peltiers will remain connected to Arduino using cables. The position of the sensor and other components can be seen in Fig. 9. The MLX90615 temperature sensor will be placed around the armpit area because in that area the temperature is not affected by skin temperature or the temperature of the outside environment. In addition, the area is often used by doctors or nurses to determine the condition of the patient's body. The pulse sensor will be placed on the palm of the hand more precisely on one of the climbers' fingers. This is because the skin in the area is thinner than the outer skin of the hand, making it easy to read the heart rate of the body. The position of the peltier and the DS18B20 temperature sensor are put together, because the DS18B20 temperature sensor will be used to find out the amount of heat generated by the peltier. The peltier is positioned in the front of the body, between the chest and abdomen. Some other peltier be placed on the back of the body, i.e., the shoulder or back. The software development system was implemented in two parts. The first part was through a software algorithm to get data and to transmit them to Arduino. The second part was the features provided in the application, along with the technology used.

In the first section, to connect Android apps with enddevice hardware, the technology of Bluetooth GATT was required because it uses Low Energy. The Android app must enable approval for Bluetooth and Location in order to perform Bluetooth device's end-search devices. Bluetooth GATT already has a feature to detect whether the Bluetooth is connected, disconnected, and able to read the data sent via Bluetooth. By default, Android will accept all data displayed in serial Arduino on the end device as shown in Fig. 10.

Fig. 11 shows the flow of data retrieval. The data will be processed and analyzed whether the climber is in a hypothermia state or not. The data will only appear as normal information data if not hypothermia. On the other hand, if hypothermia, the data will be entered into the SQLite database as hiking health history data. Furthermore, if the climber has a climber group that has been connected, the data will be broadcasted to all existing members. Additionally, if the climber minimizes the application, the climber will get notification about the circumstances of his body. In addition to receiving data from the end device, the app can send data to the end device. This allows the Android app to change the  state and set the temperature that will be released by the action point device.

The second section is in the Android app. There were 3 main features that could be used by climbers. The first feature was the climber's health monitoring of as shown in Fig. 12. This feature allows climbers to see the state of the body such as heart rate that is shown in units of bpm, as well as the temperature that is shown in degrees Celsius. In addition, climbers could measure the temperature and the heartbeat presented in graph. In this feature, there are several messages for climbers about the condition of the climber, as well as further handling when the climber is in a state of hypothermia. Climbers could adjust the jacket temperature by regulating the peltier temperature through the features available in Android Apps.

The second feature was a feature to form or search for climbing groups. By utilizing Wi-Fi Direct technology, it can connect to each other using a wireless network. This feature does not require connection to the internet so there is no need to worry if there is no network signal on the climbing site. To form groups, climbers must first define the group leader; the chairperson must create a group so that other members can join the group. Members who have joined can exchange data of health and locations. A group member can see the position and state of health of other members. This feature is shown in Fig. 13.

The third feature is the history storage feature of climber's health history. When the climber is detected as having hypothermia, the data of the condition will automatically be stored in the SQLite database. Climbers can see the history and details of their health data, such as when and where the data occurred, how to handle it, and how the current condition of the climber's body is. It can be seen in Fig. 14.

There is a notification on the Android app that will appear when the climber is detected in an abnormal state. Notifications will only appear when the climber is minimizing the Android app as shown in Fig. 15.

The first step of analysis was to test the algorithm of condition determination. This was done to determine whether the system works well in determining the condition of the climber's body. The test was conducted by taking 20 data samples from the body. The data was entered into the condition determination algorithm as shown in table 6. The data input variables are body temperature sensor data and heart rate sensor data. Furthermore, testing in normal conditions was done by taking data directly from the jacket worn by the people. Jackets that had been embedded with end devices and action points would be put on someone. Subsequently, all data from the pulse sensor, body temperature sensor, and peltier temperature sensor would be acquired. The result is shown in table 7. The data retrieved would also be displayed on the Android application.

TABLE 6. Result of data retrieval. TABLE 7. Sample of normal condition. TABLE 8. Results mean normal condition.

The obtained data would provide average results of normal condition as shown in table 8. Next, testing in severe hypothermia (emergency) condition was done directly at cold or air-conditioned room temperature. All data obtained from the pulse sensor, body temperature sensor, and peltier temperature sensor are shown in table 9.

The obtained data show average results of severe hypothermia (emergency) condition as shown in table 10.

Based on the results of the test data, it can be seen that the pattern of graphs changes in sensor values. Fig. 16 shows the results of testing changes in body temperature sensor values in two scenarios, normal and hypothermia.

TABLE 9. Sample of severe hypothermia (emergency) condition. TABLE 10. Results mean severe hypothermia (emergency) condition. FIGURE 16. Body temperature sensor in normal and hypothermia conditions. FIGURE 17. Peltier temperature sensor in normal and hypothermia conditions.

Furthermore, Fig. 17 shows the peltier temperature sensor value in normal and hypothermia conditions. In hypothermia condition, the temperature of peltier will rise to warm the jacket of the climber. TABLE 11. Comparison of body temperature sensor with digital thermometer.

Fig. 18 shows heart rate sensor value in normal and hypothermia conditions. In hypothermia condition, the heart rate becomes more unstable.

The results of data collected from the sensors were examined in order to determine whether the values were reliable. Thus, the data from each sensor would be compared to the data resulted from other tools. A comparable device was required to compare the data obtained by the sensor. Digital body thermometer was used to measure the difference of temperature value from body temperature sensor MLX90615. The body temperature sensor MLX90615 and digital thermometer were placed in the same position and would count

TABLE 12. Comparison of pulse sensor XD-58C with heart rate monitor application.

the temperature of the body simultaneously. The average temperature between the MLX90615 sensor and digital thermometer was very similar. This is shown in table 11.

Heart Rate Monitor, a smartphone application that uses cameras and flash lights on Android smartphones, was used to measure the difference of heart rate value from pulse sensor XD-58C. Data retrieval were done at the same place, that was at the fingertips. The average heart rate between the pulse sensor XD-58C and Heart Rate Monitor application was very similar as shown in table 12.

VI. CONCLUSION

This research designed architecture and implemented a prototype to detect hypothermia symptoms in the climber's body based on WBAN technology. The proposed device consists of body temperature sensor, pulse sensor, peltier temperature sensor, and peltier heating element. The data from body temperature and pulse sensors will be processed to get the climber health condition and transferred wirelessly via Bluetooth to Android smartphone. If the output condition shows that the climber is in hypothermia symptoms, the device will send a command to the action point to activate the peltier heating element to rise the temperature of the climber's jacket. The experiment results showed that the climber could use Android smartphone to monitor the body temperature value, heart rate value, and description of the body condition. The climber could connect to a group of climbers and connect each other. The Android application would notify the climber and share the notification to a group of climbers if hypothermia were detected.

In the case of hypothermia, this device can not completely cure hypothermia sufferers. This device is only used to detect symptoms of hypothermia so that early treatment can be initiated. This device can also provide an initial treatment such as the provision of heat to the body, but this is only to slow the severity of the patient's hypothermia. Further treatment can only be done by a doctor or hospital. Thus, it cannot be ascertained that if climbers use this device, climber will not get hypothermia. However, prevention is better than treatment. Because hypothermia is a disease that takes a relatively long time of healing, it is difficult to be done by non-medical people. For future work, we suggest expanding the coverage area of hypothermia detection, not only in a cluster of climbers also within the reach of the climbing area. In its development every climber's device can be connected to an access point or gateway associated with other access points and monitoring headquarters. Thus, the officers who are in the monitoring station will also get information about climbers who have hypothermia as well as the climber's location. Handling will be done much faster and can be done by someone who is an expert in the field.

FIGURE 1 .

Fig. 2

FIGURE 2 .

FIGURE 3 .

FIGURE 4 .

TABLE 2 .

TABLE 4 .

FIGURE 5 .

FIGURE 6 .

FIGURE 7 .

Code 1 .

FIGURE 8 .

FIGURE 9 .

FIGURE 10 .

FIGURE 11 .

FIGURE 12 .

FIGURE 13 .

FIGURE 14 .

FIGURE 15 .

FIGURE 18 .

VOLUME 8, 2020

VOLUME 8, 2020

VOLUME 8, 2020

VOLUME 8, 2020

VOLUME 8, 2020

VOLUME 8, 2020
=====================================
